class r{constructor(){this.experience=0,this.level=1,this.availableUpgrades=[],this.selectedUpgrade=null,this.expTable=this.generateExpTable()}generateExpTable(){const e=[];let t=100;for(let i=1;i<=100;i++)e.push(t),t=Math.floor(t*1.4);return e}addExperience(e){return this.experience+=e,this.checkLevelUp()}checkLevelUp(){const e=this.getRequiredExpForLevel(this.level+1);return this.experience>=e&&this.level<100?(this.level++,this.generateUpgradeChoices(),!0):!1}getRequiredExpForLevel(e){return e<=1?0:this.expTable[e-2]||this.expTable[this.expTable.length-1]}getCurrentLevelProgress(){const e=this.getRequiredExpForLevel(this.level),t=this.getRequiredExpForLevel(this.level+1),i=this.experience-e,l=t-e;return{current:i,total:l,percentage:Math.min(1,i/l)}}generateUpgradeChoices(){const t=[...[{id:"damage",name:"æ”»æ’ƒåŠ›UP",description:"ãƒ€ãƒ¡ãƒ¼ã‚¸ãŒ25%å¢—åŠ ",icon:"âš”ï¸",effect:{type:"damage",value:.25}},{id:"fireRate",name:"æ”»æ’ƒé€Ÿåº¦UP",description:"å°„æ’ƒãƒ¬ãƒ¼ãƒˆãŒ20%å‘ä¸Š",icon:"ðŸ”¥",effect:{type:"fireRate",value:.2}},{id:"speed",name:"ç§»å‹•é€Ÿåº¦UP",description:"ç§»å‹•é€Ÿåº¦ãŒ15%å‘ä¸Š",icon:"ðŸ’¨",effect:{type:"speed",value:.15}},{id:"health",name:"ä½“åŠ›UP",description:"æœ€å¤§HPãŒ1å¢—åŠ ",icon:"â¤ï¸",effect:{type:"health",value:1}},{id:"multiShot",name:"å¼¾æ•°å¢—åŠ ",description:"åŒæ™‚ç™ºå°„å¼¾æ•°ãŒ1å¢—åŠ ",icon:"ðŸ”«",effect:{type:"multiShot",value:1}},{id:"piercing",name:"è²«é€šåŠ›",description:"å¼¾ãŒæ•µã‚’è²«é€šã™ã‚‹",icon:"ðŸŽ¯",effect:{type:"piercing",value:1}},{id:"explosive",name:"ç¯„å›²æ”»æ’ƒ",description:"çˆ†ç™ºç¯„å›²ãƒ€ãƒ¡ãƒ¼ã‚¸",icon:"ðŸ’¥",effect:{type:"explosive",value:1}},{id:"lifesteal",name:"ãƒ©ã‚¤ãƒ•ã‚¹ãƒ†ã‚£ãƒ¼ãƒ«",description:"æ•µæ’ƒç ´æ™‚HPå›žå¾©",icon:"ðŸ©¸",effect:{type:"lifesteal",value:1}}]].sort(()=>Math.random()-.5);this.availableUpgrades=t.slice(0,3)}selectUpgrade(e){return e>=0&&e<this.availableUpgrades.length?(this.selectedUpgrade=this.availableUpgrades[e],this.availableUpgrades=[],this.selectedUpgrade):null}getLevel(){return this.level}getExperience(){return this.experience}getAvailableUpgrades(){return this.availableUpgrades}hasAvailableUpgrades(){return this.availableUpgrades.length>0}reset(){this.experience=0,this.level=1,this.availableUpgrades=[],this.selectedUpgrade=null}getSaveData(){return{maxLevel:this.level}}}export{r as LevelingSystem};
